import{Aa as H,B as m,H as I,J as O,N as l,O as K,Q as B,S as u,a as L,j as y,ka as w,n as C,p as g,r as S,u as D,v as x,w as E,z as N}from"./chunk-X2YY7DSH.js";var F=class{},U=(()=>{class e{handle(t){return t.key}static \u0275fac=function(n){return new(n||e)};static \u0275prov=l({token:e,factory:e.\u0275fac})}return e})(),d=class{},$=(()=>{class e extends d{compile(t,n){return t}compileTranslations(t,n){return t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=w(e)))(r||e)}})();static \u0275prov=l({token:e,factory:e.\u0275fac})}return e})(),p=class{},q=(()=>{class e extends p{getTranslation(t){return C({})}static \u0275fac=(()=>{let t;return function(r){return(t||(t=w(e)))(r||e)}})();static \u0275prov=l({token:e,factory:e.\u0275fac})}return e})();function h(e){return typeof e<"u"&&e!==null}function _(e){return e!==void 0}function f(e){return v(e)&&!c(e)&&e!==null}function v(e){return typeof e=="object"&&e!==null}function c(e){return Array.isArray(e)}function P(e){return typeof e=="string"}function et(e){return typeof e=="function"}function k(e){if(c(e))return e.map(a=>k(a));if(f(e)){let a={};return Object.keys(e).forEach(t=>{a[t]=k(e[t])}),a}else return e}function M(e,a){if(!v(e))return k(a);let t=k(e);return v(t)&&v(a)&&Object.keys(a).forEach(n=>{f(a[n])?n in e?t[n]=M(e[n],a[n]):Object.assign(t,{[n]:a[n]}):Object.assign(t,{[n]:a[n]})}),t}function G(e,a){let t=a.split(".");a="";do{a+=t.shift();let n=!t.length;if(h(e)){if(f(e)&&_(e[a])&&(f(e[a])||c(e[a])||n)){e=e[a],a="";continue}if(c(e)){let r=parseInt(a,10);if(_(e[r])&&(f(e[r])||c(e[r])||n)){e=e[r],a="";continue}}}if(n){e=void 0;continue}a+="."}while(t.length);return e}function nt(e,a,t){return M(e,rt(a,t))}function rt(e,a){return e.split(".").reduceRight((t,n)=>({[n]:t}),a)}var b=class{},z=(()=>{class e extends b{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(t,n){if(P(t))return this.interpolateString(t,n);if(et(t))return this.interpolateFunction(t,n)}interpolateFunction(t,n){return t(n)}interpolateString(t,n){return n?t.replace(this.templateMatcher,(r,s)=>{let i=this.getInterpolationReplacement(n,s);return i!==void 0?i:r}):t}getInterpolationReplacement(t,n){return this.formatValue(G(t,n))}formatValue(t){if(P(t))return t;if(typeof t=="number"||typeof t=="boolean")return t.toString();if(t===null)return"null";if(c(t))return t.join(", ");if(v(t))return typeof t.toString=="function"&&t.toString!==Object.prototype.toString?t.toString():JSON.stringify(t)}static \u0275fac=(()=>{let t;return function(r){return(t||(t=w(e)))(r||e)}})();static \u0275prov=l({token:e,factory:e.\u0275fac})}return e})(),A=(()=>{class e{_onTranslationChange=new y;_onLangChange=new y;_onFallbackLangChange=new y;fallbackLang=null;currentLang;translations={};languages=[];getTranslations(t){return this.translations[t]}setTranslations(t,n,r){this.translations[t]=r&&this.hasTranslationFor(t)?M(this.translations[t],n):n,this.addLanguages([t]),this._onTranslationChange.next({lang:t,translations:this.getTranslations(t)})}getLanguages(){return this.languages}getCurrentLang(){return this.currentLang}getFallbackLang(){return this.fallbackLang}setFallbackLang(t,n=!0){this.fallbackLang=t,n&&this._onFallbackLangChange.next({lang:t,translations:this.translations[t]})}setCurrentLang(t,n=!0){this.currentLang=t,n&&this._onLangChange.next({lang:t,translations:this.translations[t]})}get onTranslationChange(){return this._onTranslationChange.asObservable()}get onLangChange(){return this._onLangChange.asObservable()}get onFallbackLangChange(){return this._onFallbackLangChange.asObservable()}addLanguages(t){this.languages=Array.from(new Set([...this.languages,...t]))}hasTranslationFor(t){return typeof this.translations[t]<"u"}deleteTranslations(t){delete this.translations[t]}getTranslation(t){let n=this.getValue(this.currentLang,t);return n===void 0&&this.fallbackLang!=null&&this.fallbackLang!==this.currentLang&&(n=this.getValue(this.fallbackLang,t)),n}getValue(t,n){return G(this.getTranslations(t),n)}static \u0275fac=function(n){return new(n||e)};static \u0275prov=l({token:e,factory:e.\u0275fac})}return e})(),R=new B("TRANSLATE_CONFIG"),T=e=>g(e)?e:C(e);var J=(()=>{class e{loadingTranslations;pending=!1;_translationRequests={};lastUseLanguage=null;currentLoader=u(p);compiler=u(d);parser=u(b);missingTranslationHandler=u(F);store=u(A);extend=!1;get onTranslationChange(){return this.store.onTranslationChange}get onLangChange(){return this.store.onLangChange}get onFallbackLangChange(){return this.store.onFallbackLangChange}get onDefaultLangChange(){return this.store.onFallbackLangChange}constructor(){let t=L({extend:!1,fallbackLang:null},u(R,{optional:!0}));t.lang&&this.use(t.lang),t.fallbackLang&&this.setFallbackLang(t.fallbackLang),t.extend&&(this.extend=!0)}setFallbackLang(t){this.getFallbackLang()||this.store.setFallbackLang(t,!1);let n=this.loadOrExtendLanguage(t);return g(n)?(n.pipe(m(1)).subscribe({next:()=>{this.store.setFallbackLang(t)},error:()=>{}}),n):(this.store.setFallbackLang(t),C(this.store.getTranslations(t)))}use(t){this.lastUseLanguage=t,this.getCurrentLang()||this.store.setCurrentLang(t,!1);let n=this.loadOrExtendLanguage(t);return g(n)?(n.pipe(m(1)).subscribe({next:()=>{this.changeLang(t)},error:()=>{}}),n):(this.changeLang(t),C(this.store.getTranslations(t)))}loadOrExtendLanguage(t){if(!this.store.hasTranslationFor(t)||this.extend)return this._translationRequests[t]=this._translationRequests[t]||this.loadAndCompileTranslations(t),this._translationRequests[t]}changeLang(t){t===this.lastUseLanguage&&this.store.setCurrentLang(t)}getCurrentLang(){return this.store.getCurrentLang()}loadAndCompileTranslations(t){this.pending=!0;let n=this.currentLoader.getTranslation(t).pipe(I(1),m(1));return this.loadingTranslations=n.pipe(S(r=>this.compiler.compileTranslations(r,t)),I(1),m(1)),this.loadingTranslations.subscribe({next:r=>{this.store.setTranslations(t,r,this.extend),this.pending=!1},error:r=>{this.pending=!1}}),n}setTranslation(t,n,r=!1){let s=this.compiler.compileTranslations(n,t);this.store.setTranslations(t,s,r||this.extend)}getLangs(){return this.store.getLanguages()}addLangs(t){this.store.addLanguages(t)}getParsedResultForKey(t,n){let r=this.getTextToInterpolate(t);if(h(r))return this.runInterpolation(r,n);let s=this.missingTranslationHandler.handle(L({key:t,translateService:this},n!==void 0&&{interpolateParams:n}));return s!==void 0?s:t}getFallbackLang(){return this.store.getFallbackLang()}getTextToInterpolate(t){return this.store.getTranslation(t)}runInterpolation(t,n){if(h(t))return c(t)?this.runInterpolationOnArray(t,n):f(t)?this.runInterpolationOnDict(t,n):this.parser.interpolate(t,n)}runInterpolationOnArray(t,n){return t.map(r=>this.runInterpolation(r,n))}runInterpolationOnDict(t,n){let r={};for(let s in t){let i=this.runInterpolation(t[s],n);i!==void 0&&(r[s]=i)}return r}getParsedResult(t,n){return t instanceof Array?this.getParsedResultForArray(t,n):this.getParsedResultForKey(t,n)}getParsedResultForArray(t,n){let r={},s=!1;for(let o of t)r[o]=this.getParsedResultForKey(o,n),s=s||g(r[o]);if(!s)return r;let i=t.map(o=>T(r[o]));return E(i).pipe(S(o=>{let V={};return o.forEach((Y,tt)=>{V[t[tt]]=Y}),V}))}get(t,n){if(!h(t)||!t.length)throw new Error('Parameter "key" is required and cannot be empty');return this.pending?this.loadingTranslations.pipe(N(()=>T(this.getParsedResult(t,n)))):T(this.getParsedResult(t,n))}getStreamOnTranslationChange(t,n){if(!h(t)||!t.length)throw new Error('Parameter "key" is required and cannot be empty');return D(x(()=>this.get(t,n)),this.onTranslationChange.pipe(O(()=>{let r=this.getParsedResult(t,n);return T(r)})))}stream(t,n){if(!h(t)||!t.length)throw new Error('Parameter "key" required');return D(x(()=>this.get(t,n)),this.onLangChange.pipe(O(()=>{let r=this.getParsedResult(t,n);return T(r)})))}instant(t,n){if(!h(t)||t.length===0)throw new Error('Parameter "key" is required and cannot be empty');let r=this.getParsedResult(t,n);return g(r)?Array.isArray(t)?t.reduce((s,i)=>(s[i]=i,s),{}):t:r}set(t,n,r=this.getCurrentLang()){this.store.setTranslations(r,nt(this.store.getTranslations(r),t,P(n)?this.compiler.compile(n,r):this.compiler.compileTranslations(n,r)),!1)}reloadLang(t){return this.resetLang(t),this.loadAndCompileTranslations(t)}resetLang(t){delete this._translationRequests[t],this.store.deleteTranslations(t)}static getBrowserLang(){if(typeof window>"u"||!window.navigator)return;let t=this.getBrowserCultureLang();return t?t.split(/[-_]/)[0]:void 0}static getBrowserCultureLang(){if(!(typeof window>"u"||typeof window.navigator>"u"))return window.navigator.languages?window.navigator.languages[0]:window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage}getBrowserLang(){return e.getBrowserLang()}getBrowserCultureLang(){return e.getBrowserCultureLang()}get defaultLang(){return this.getFallbackLang()}get currentLang(){return this.store.getCurrentLang()}get langs(){return this.store.getLanguages()}setDefaultLang(t){return this.setFallbackLang(t)}getDefaultLang(){return this.getFallbackLang()}static \u0275fac=function(n){return new(n||e)};static \u0275prov=l({token:e,factory:e.\u0275fac})}return e})();function W(e){return{provide:p,useClass:e}}function Z(e){return{provide:d,useClass:e}}function Q(e){return{provide:b,useClass:e}}function X(e){return{provide:F,useClass:e}}function Lt(e={}){return j(L({compiler:Z($),parser:Q(z),loader:W(q),missingTranslationHandler:X(U)},e),!0)}function j(e={},a){let t=[];e.loader&&t.push(e.loader),e.compiler&&t.push(e.compiler),e.parser&&t.push(e.parser),e.missingTranslationHandler&&t.push(e.missingTranslationHandler),a&&t.push(A),(e.useDefaultLang||e.defaultLanguage)&&(console.warn("The `useDefaultLang` and `defaultLanguage` options are deprecated. Please use `fallbackLang` instead."),e.useDefaultLang===!0&&e.defaultLanguage&&(e.fallbackLang=e.defaultLanguage));let n={fallbackLang:e.fallbackLang??null,lang:e.lang,extend:e.extend??!1};return t.push({provide:R,useValue:n}),t.push({provide:J,useClass:J,deps:[A,p,d,b,F,R]}),t}var Ct=(()=>{class e{static forRoot(t={}){return{ngModule:e,providers:[...j(L({compiler:Z($),parser:Q(z),loader:W(q),missingTranslationHandler:X(U)},t),!0)]}}static forChild(t={}){return{ngModule:e,providers:[...j(t,t.isolate??!1)]}}static \u0275fac=function(n){return new(n||e)};static \u0275mod=H({type:e});static \u0275inj=K({})}return e})();export{p as a,Lt as b,Ct as c};
